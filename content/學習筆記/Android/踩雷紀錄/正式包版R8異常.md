---
draft: true
---


測試環境包版測試都沒問題，正式環境包版遇到Task :app:minifyReleaseWithR8 FAILED

![[img_error_r8.png]]
從錯誤Log看起來是proguard minifyR8問題
繞了一大圈關閉R8(gradle Wrapper檔android.enableR8=false加上註解掉build.gradle的minifyEnable與shrinkResources)，雖然可以動作但是也等於不使用proguard壓縮檔案容量，也曾嘗試在proguard-rules去新增keep事件但是都沒解決，最後上網查找問題看到別人提供minifyReleaseWithR8在講解新增proguard-rules中，提到使用android:onclick="@{onClick}"一定要記得在xml上方加上
```xml
<layout>
    <data>
        <variable>
        </variable>
    </data>
</layout>
```
才想到是不是在某個xml沒加上variable，最後果然在某個RecyclerView使用的item.xml發現有使用onclick但是卻沒寫variable，並且也很白癡的在使用時寫setOnClickListener，所以程式作動也沒問題，在build正式才觸發是因為本專案只針對Release環境才使用MinifyEnable true(與Shrink)所以才會造就本次事件。以此文紀念之。

>[!abstract] 重點
>豪哥大神說，Proguard問題(包含Minify、R8......等關鍵字)，一定都是因為Resource檔有問題，可能是圖片名稱相同或是xml檔問題